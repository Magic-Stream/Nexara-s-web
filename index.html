<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexara Web Browser</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body, html {
            height: 100%;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .home-page {
            background: linear-gradient(to bottom right, #312e81, #7e22ce, #be185d);
            min-height: 100%;
            overflow-y: auto;
        }
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .gradient-text {
            background: linear-gradient(to right, #22d3ee, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        iframe {
            border: none;
            width: 100%;
            height: 100%;
        }
        .tab {
            transition: all 0.2s;
        }
        .tab:hover {
            background: #374151;
        }
        .tab.active {
            background: #030712;
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .hidden {
            display: none;
        }
        .popular-site:hover, .bookmark-item:hover, .recent-item:hover {
            background: rgba(255, 255, 255, 0.15);
        }
    </style>
</head>
<body class="bg-gray-950">
    <div class="flex flex-col h-screen">
        <!-- Tabs Bar -->
        <div class="flex items-center bg-gray-900 px-2 pt-2 border-b border-gray-800">
            <div id="tabs-container" class="flex flex-1 overflow-x-auto gap-1"></div>
            <button onclick="addTab()" class="p-2 ml-2 hover:bg-gray-800 rounded-lg text-gray-400 hover:text-white transition-colors" title="New Tab">
                <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
            </button>
            <button class="p-2 ml-1 hover:bg-gray-800 rounded-lg text-gray-400 hover:text-white transition-colors" title="Settings">
                <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M12 1v6m0 6v6m5.2-13.2l-4.2 4.2m-1.8 1.8l-4.2 4.2M23 12h-6m-6 0H1m13.2 5.2l-4.2-4.2m-1.8-1.8l-4.2-4.2"></path></svg>
            </button>
        </div>

        <!-- Navigation Bar -->
        <div class="flex items-center gap-2 bg-gray-900 px-4 py-3 border-b border-gray-800">
            <button onclick="goBack()" id="back-btn" class="p-2 rounded-lg transition-colors text-gray-700 cursor-not-allowed" title="Back">
                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
            </button>
            <button onclick="goForward()" id="forward-btn" class="p-2 rounded-lg transition-colors text-gray-700 cursor-not-allowed" title="Forward">
                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
            </button>
            <button onclick="reload()" class="p-2 hover:bg-gray-800 rounded-lg text-gray-300 hover:text-white transition-colors" title="Reload">
                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path></svg>
            </button>
            <button onclick="goHome()" class="p-2 hover:bg-gray-800 rounded-lg text-gray-300 hover:text-white transition-colors" title="Home">
                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
            </button>

            <div class="flex-1 flex items-center bg-gray-800 rounded-lg px-4 py-2.5 border border-gray-700 focus-within:border-cyan-500 transition-colors">
                <input type="text" id="url-input" placeholder="Search or enter URL..." class="flex-1 bg-transparent text-white outline-none text-sm placeholder-gray-500">
            </div>

            <button onclick="toggleBookmark()" id="bookmark-btn" class="p-2 rounded-lg transition-colors text-gray-400 hover:bg-gray-800 hover:text-yellow-400" title="Bookmark">
                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
            </button>
        </div>

        <!-- Browser Content -->
        <div id="content-area" class="flex-1 relative overflow-hidden bg-white"></div>
    </div>

    <script>
        let tabs = [
            { id: 1, url: 'nexara://home', title: 'Home', history: ['nexara://home'], historyIndex: 0 }
        ];
        let activeTabId = 1;
        let bookmarks = [
            { name: 'Wikipedia', url: 'https://www.wikipedia.org' },
            { name: 'GitHub', url: 'https://github.com' },
            { name: 'MDN Web Docs', url: 'https://developer.mozilla.org' },
            { name: 'Stack Overflow', url: 'https://stackoverflow.com' }
        ];
        let recentSites = [
            { name: 'Wikipedia', url: 'https://www.wikipedia.org' },
            { name: 'GitHub', url: 'https://github.com' }
        ];

        function getCurrentTab() {
            return tabs.find(t => t.id === activeTabId);
        }

        function renderTabs() {
            const container = document.getElementById('tabs-container');
            container.innerHTML = tabs.map(tab => `
                <div class="tab ${tab.id === activeTabId ? 'active' : ''} flex items-center gap-2 px-4 py-2.5 rounded-t-lg cursor-pointer min-w-40 max-w-56 bg-gray-800 text-gray-400" onclick="switchTab(${tab.id})">
                    <span class="truncate flex-1 text-sm font-medium">${tab.title}</span>
                    ${tabs.length > 1 ? `<span onclick="closeTab(event, ${tab.id})" class="hover:bg-gray-700 rounded p-0.5 transition-colors">
                        <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </span>` : ''}
                </div>
            `).join('');
        }

        function renderContent() {
            const tab = getCurrentTab();
            const content = document.getElementById('content-area');
            document.getElementById('url-input').value = tab.url === 'nexara://home' ? '' : tab.url;

            if (tab.url === 'nexara://home') {
                content.innerHTML = renderHomePage();
            } else {
                content.innerHTML = `<iframe src="${tab.url}" sandbox="allow-same-origin allow-scripts allow-popups allow-forms allow-popups-to-escape-sandbox"></iframe>`;
            }

            updateNavigationButtons();
            updateBookmarkButton();
        }

        function renderHomePage() {
            return `
                <div class="home-page flex flex-col items-center justify-center p-8">
                    <div class="max-w-4xl w-full">
                        <div class="text-center mb-12">
                            <h1 class="text-7xl font-bold text-white mb-6 tracking-tight">
                                Nexara <span class="gradient-text">Web</span>
                            </h1>
                            <div class="max-w-2xl mx-auto relative">
                                <input type="text" id="home-search" placeholder="Search or enter URL..." class="w-full px-6 py-4 rounded-full glass text-white placeholder-white/60 text-lg outline-none focus:border-cyan-400 transition-all" onkeypress="if(event.key==='Enter') navigate(this.value)">
                                <svg class="absolute right-6 top-1/2 -translate-y-1/2 text-white/60" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                            <div class="glass rounded-2xl p-6">
                                <div class="flex items-center gap-2 mb-4">
                                    <svg class="text-cyan-400" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg>
                                    <h2 class="text-xl font-semibold text-white">Bookmarks</h2>
                                </div>
                                <div class="space-y-2">
                                    ${bookmarks.slice(0, 4).map(b => `
                                        <div class="bookmark-item flex items-center justify-between p-3 rounded-lg bg-white/5 cursor-pointer transition-all group" onclick="navigate('${b.url}')">
                                            <span class="text-white/90">${b.name}</span>
                                            <span onclick="removeBookmark(event, '${b.url}')" class="text-white/40 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity">
                                                <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                                            </span>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>

                            <div class="glass rounded-2xl p-6">
                                <div class="flex items-center gap-2 mb-4">
                                    <svg class="text-pink-400" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                                    <h2 class="text-xl font-semibold text-white">Recent</h2>
                                </div>
                                <div class="space-y-2">
                                    ${recentSites.slice(0, 4).map(s => `
                                        <div class="recent-item p-3 rounded-lg bg-white/5 cursor-pointer transition-all" onclick="navigate('${s.url}')">
                                            <span class="text-white/90">${s.name}</span>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>

                        <div class="glass rounded-2xl p-6">
                            <div class="flex items-center gap-2 mb-4">
                                <svg class="text-yellow-400" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline></svg>
                                <h2 class="text-xl font-semibold text-white">Popular Sites</h2>
                            </div>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                                ${['Google', 'YouTube', 'Twitter', 'Reddit', 'Amazon', 'Netflix', 'Spotify', 'LinkedIn'].map(site => `
                                    <div class="popular-site p-4 rounded-lg bg-white/5 cursor-pointer transition-all text-center" onclick="navigate('https://www.${site.toLowerCase()}.com')">
                                        <span class="text-white/90 font-medium">${site}</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function navigate(url) {
            if (!url) return;
            
            if (url !== 'nexara://home' && !url.startsWith('http://') && !url.startsWith('https://')) {
                url = 'https://' + url;
            }

            const tab = getCurrentTab();
            const newHistory = tab.history.slice(0, tab.historyIndex + 1);
            newHistory.push(url);
            tab.history = newHistory;
            tab.historyIndex = newHistory.length - 1;
            tab.url = url;
            tab.title = url === 'nexara://home' ? 'Home' : url.replace(/^https?:\/\//, '').split('/')[0];

            if (url !== 'nexara://home' && !recentSites.find(r => r.url === url)) {
                const domain = url.replace(/^https?:\/\//, '').split('/')[0];
                recentSites.unshift({ name: domain, url });
                recentSites = recentSites.slice(0, 8);
            }

            renderTabs();
            renderContent();
        }

        function goBack() {
            const tab = getCurrentTab();
            if (tab.historyIndex > 0) {
                tab.historyIndex--;
                tab.url = tab.history[tab.historyIndex];
                renderTabs();
                renderContent();
            }
        }

        function goForward() {
            const tab = getCurrentTab();
            if (tab.historyIndex < tab.history.length - 1) {
                tab.historyIndex++;
                tab.url = tab.history[tab.historyIndex];
                renderTabs();
                renderContent();
            }
        }

        function reload() {
            const tab = getCurrentTab();
            if (tab.url !== 'nexara://home') {
                renderContent();
            }
        }

        function goHome() {
            navigate('nexara://home');
        }

        function addTab() {
            const newId = Math.max(...tabs.map(t => t.id)) + 1;
            tabs.push({ 
                id: newId, 
                url: 'nexara://home', 
                title: 'Home',
                history: ['nexara://home'],
                historyIndex: 0
            });
            activeTabId = newId;
            renderTabs();
            renderContent();
        }

        function closeTab(event, id) {
            event.stopPropagation();
            if (tabs.length === 1) return;
            tabs = tabs.filter(t => t.id !== id);
            if (activeTabId === id) {
                activeTabId = tabs[0].id;
            }
            renderTabs();
            renderContent();
        }

        function switchTab(id) {
            activeTabId = id;
            renderTabs();
            renderContent();
        }

        function toggleBookmark() {
            const tab = getCurrentTab();
            if (tab.url === 'nexara://home') return;

            const existingIndex = bookmarks.findIndex(b => b.url === tab.url);
            if (existingIndex >= 0) {
                bookmarks.splice(existingIndex, 1);
            } else {
                const name = prompt('Bookmark name:', tab.title);
                if (name) {
                    bookmarks.push({ name, url: tab.url });
                }
            }
            updateBookmarkButton();
            if (tab.url === 'nexara://home') renderContent();
        }

        function removeBookmark(event, url) {
            event.stopPropagation();
            bookmarks = bookmarks.filter(b => b.url !== url);
            renderContent();
        }

        function updateNavigationButtons() {
            const tab = getCurrentTab();
            const backBtn = document.getElementById('back-btn');
            const forwardBtn = document.getElementById('forward-btn');

            if (tab.historyIndex > 0) {
                backBtn.disabled = false;
                backBtn.className = 'p-2 rounded-lg transition-colors hover:bg-gray-800 text-gray-300 hover:text-white';
            } else {
                backBtn.disabled = true;
                backBtn.className = 'p-2 rounded-lg transition-colors text-gray-700 cursor-not-allowed';
            }

            if (tab.historyIndex < tab.history.length - 1) {
                forwardBtn.disabled = false;
                forwardBtn.className = 'p-2 rounded-lg transition-colors hover:bg-gray-800 text-gray-300 hover:text-white';
            } else {
                forwardBtn.disabled = true;
                forwardBtn.className = 'p-2 rounded-lg transition-colors text-gray-700 cursor-not-allowed';
            }
        }

        function updateBookmarkButton() {
            const tab = getCurrentTab();
            const btn = document.getElementById('bookmark-btn');
            const isBookmarked = bookmarks.find(b => b.url === tab.url);
            
            if (tab.url === 'nexara://home') {
                btn.disabled = true;
                btn.className = 'p-2 rounded-lg transition-colors text-gray-700 cursor-not-allowed';
            } else {
                btn.disabled = false;
                btn.className = `p-2 rounded-lg transition-colors ${isBookmarked ? 'text-yellow-400' : 'text-gray-400'} hover:bg-gray-800 hover:text-yellow-400`;
                btn.innerHTML = isBookmarked ? 
                    '<svg width="20" height="20" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>' :
                    '<svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>';
            }
        }

        document.getElementById('url-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                navigate(this.value);
            }
        });

        document.getElementById('url-input').addEventListener('focus', function() {
            this.select();
        });

        renderTabs();
        renderContent();
    </script>
</body>
    </html>
